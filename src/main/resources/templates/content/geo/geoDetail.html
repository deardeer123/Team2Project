<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{fragment/detail/detail_layout}">

<th:block layout:fragment="content_css">
    <!-- html 파일이 열릴때 같이 실행되는 css -->
    <link rel="stylesheet" href="/">
</th:block>

<th:block layout:fragment="contentFragment">
    <style>
        /* 커서안생기게 하는 CSS */
        body{
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
    </style>
    
    <!-- html 코드 작성 -->
    <div class="row">
        <div class="col">

            <div class="row">
                <div class="col">
                    <!-- 전체, 수도권, 중부권, 남부권 -->
                    
                    
                    <div class="row" style="background-color: #545B75;">
                        <div class="col-1 text-center text-white fs-3 bg-danger area-menu"
                            onclick="detailArea('all', this)" style="margin-left: 1em;">
                            전체
                        </div>
                        <div class="col-1 text-center text-white fs-3 area-menu" onclick="detailArea('capital', this)">
                            <span class="text-white">수도권</span>
                        </div>

                        <div class="col-1 text-center text-white fs-3 area-menu" onclick="detailArea('middle', this)">
                            <span class="text-white">중부권</span>
                        </div>

                        <div class="col-1 text-center text-white fs-3 area-menu" onclick="detailArea('south', this)">
                            <span class="text-white">남부권</span>
                        </div>
                    </div>

                </div>
            </div>

            <div class="mt-3 mt-2 fs-3 fw-bold text-center text-white">
                <span><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor" class="bi bi-geo-alt" viewBox="0 0 16 16">
                    <path d="M12.166 8.94c-.524 1.062-1.234 2.12-1.96 3.07A32 32 0 0 1 8 14.58a32 32 0 0 1-2.206-2.57c-.726-.95-1.436-2.008-1.96-3.07C3.304 7.867 3 6.862 3 6a5 5 0 0 1 10 0c0 .862-.305 1.867-.834 2.94M8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10"/>
                    <path d="M8 8a2 2 0 1 1 0-4 2 2 0 0 1 0 4m0 1a3 3 0 1 0 0-6 3 3 0 0 0 0 6"/>
                  </svg>
                </span>
                한국전기안전공사 연도별 지역별 전기화재 통계
            </div>

            <div class="row mt-2">
                <div class="col-6">
                    <!-- 일단 왼쪽에는 지도 마크 보여주기 -->
                    <div>
                        <div class=" border border-danger border-5 area-name-div" style="background-color: #545B75;">
                            <!-- 수도권 => 서울시 인천시 경기도 -->
                            <div class="fs-3 text-center fw-bold text-white">수도권</div>
                            <div class="row">
                                <div class="col-3"></div>
                                <div class="col-2">
                                    <!-- 서울 -->
                                    <img src="/upload/서울최종.png" width="75%">
                                </div>
                                <div class="col-2">
                                    <!-- 인천 -->
                                    <img src="/upload/인천최종.png" width="75%" style="padding-top: 32px;">
                                </div>
                                <div class="col-2">
                                    <!-- 경기도 -->
                                    <img src="/upload/경기최종.png" width="75%" style="padding-top: 45px;">
                                </div>
                                <div class="col-3"></div>

                            </div>

                        </div>
                        <div class="mt-2 border border-danger border-5 area-name-div"
                            style="background-color: #545B75;">
                            <!-- 중부권 => 강원도, 충북, 충남, 세종, 대전-->
                            <div class="fs-3 text-center fw-bold text-white">중부권</div>
                            <div class="row">
                                <div class="col-1"></div>
                                <div class="col-2">
                                    <!-- 강원도 -->
                                    <img src="/upload/강원최종.png" width="75%" style="padding-top: 30px;">
                                </div>
                                <div class="col-2">
                                    <!-- 충북 -->
                                    <img src="/upload/충북최종.png" width="65%">
                                </div>
                                <div class="col-2">
                                    <!-- 충남 -->
                                    <img src="/upload/충남최종.png" width="75%" style="padding-top: 30px;">
                                </div>
                                <div class="col-2">
                                    <!-- 세종 -->
                                    <img src="/upload/세종최종.png" width="75%" style="padding-top: 45px;">
                                </div>
                                <div class="col-2">
                                    <!-- 대전 -->
                                    <img src="/upload/대전최종.png" width="75%" style="padding-top: 40;">
                                </div>
                                <div class="col-1"></div>
                            </div>
                        </div>
                        <div class="mt-2 border border-danger border-5 area-name-div"
                            style="background-color: #545B75;">
                            <!-- 남부권 => 광주, 전라북도, 전라남도, 대구, 울산, 부산, 경상북도, 경상남도, 제주도 -->
                            <div class="fs-3  text-center fw-bold text-white">남부권</div>
                            <div class="row">
                                <div class="col-2"></div>
                                <div class="col-2">
                                    <!-- 전라북도 -->
                                    <img src="/upload/전북최종.png" width="100%">
                                </div>
                                <div class="col-2">
                                    <!-- 전라남도 -->
                                    <img src="/upload/전남최종.png" width="90%">
                                </div>
                                <div class="col-2">
                                    <!-- 광주 -->
                                    <img src="/upload/광주최종.png" width="60%" style="margin-left: 20px;">
                                </div>
                                <div class="col-2">
                                    <!-- 대구 -->
                                    <img src="/upload/대구최종.png" width="60%">
                                </div>
                                <div class="col-2"></div>
                            </div>

                            <div class="row">
                                <div class="col-1"></div>
                                <div class="col-2">
                                    <!-- 울산 -->
                                    <img src="/upload/울산최종.png" width="60%">
                                </div>
                                <div class="col-2">
                                    <!-- 부산 -->
                                    <img src="/upload/부산최종.png" width="100%">
                                </div>
                                <div class="col-2">
                                    <!-- 경상북도 -->
                                    <img src="/upload/경북최종.png" width="100%" style="padding-top: 30px;">
                                </div>
                                <div class="col-2">
                                    <!-- 경상남도 -->
                                    <img src="/upload/경남최종.png" width="70%" style="margin-left: 25px;">
                                </div>
                                <div class="col-2">
                                    <!-- 제주도 -->
                                    <img src="/upload/제주최종.png" width="100%">
                                </div>
                                <div class="col-1"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-6">
                    <!-- 오른쪽에는 선택한 지역의 정보 보여주기 -->
                    <div>
                        <table class="table table-bordered table-sm area-table">
                            <thead>
                                <tr>
                                    <td style="background-color: #1C212F; color: aliceblue;">연도</td>
                                    <td style="background-color: #1C212F; color: aliceblue;">서울</td>
                                    <td style="background-color: #1C212F; color: aliceblue;">부산</td>
                                    <td style="background-color: #1C212F; color: aliceblue;">대구</td>
                                    <td style="background-color: #1C212F; color: aliceblue;">인천</td>
                                    <td style="background-color: #1C212F; color: aliceblue;">광주</td>
                                    <td style="background-color: #1C212F; color: aliceblue;">대전</td>
                                    <td style="background-color: #1C212F; color: aliceblue;">세종</td>
                                    <td style="background-color: #1C212F; color: aliceblue;">울산</td>
                                    <td style="background-color: #1C212F; color: aliceblue;">경기</td>
                                    <td style="background-color: #1C212F; color: aliceblue;">강원</td>
                                    <td style="background-color: #1C212F; color: aliceblue;">충복</td>
                                    <td style="background-color: #1C212F; color: aliceblue;">충남</td>
                                    <td style="background-color: #1C212F; color: aliceblue;">전북</td>
                                    <td style="background-color: #1C212F; color: aliceblue;">전남</td>
                                    <td style="background-color: #1C212F; color: aliceblue;">경북</td>
                                    <td style="background-color: #1C212F; color: aliceblue;">경남</td>
                                    <td style="background-color: #1C212F; color: aliceblue;">제주</td>
                                </tr>
                            </thead>
                            <tbody>
                                <th:block th:each="e:${data}">
                                    <tr>
                                        <td>[[${e.OCCURRED_YEAR}]]</td>
                                        <td>[[${e.SEOUL}]]</td>
                                        <td>[[${e.BUSAN}]]</td>
                                        <td>[[${e.DAEGU}]]</td>
                                        <td>[[${e.INCHEON}]]</td>
                                        <td>[[${e.GWANGJU}]]</td>
                                        <td>[[${e.DAEJEON}]]</td>
                                        <td>[[${e.SEJONG}]]</td>
                                        <td>[[${e.ULSAN}]]</td>
                                        <td>[[${e.GYEONGGI}]]</td>
                                        <td>[[${e.GANGWON}]]</td>
                                        <td>[[${e.CHUNGBUK}]]</td>
                                        <td>[[${e.CHUNGNAM}]]</td>
                                        <td>[[${e.JEONBUK}]]</td>
                                        <td>[[${e.JEONNAM}]]</td>
                                        <td>[[${e.GYEONGNUK}]]</td>
                                        <td>[[${e.GYEONGNAM}]]</td>
                                        <td>[[${e.JEJU}]]</td>
                                    </tr>
                                </th:block>
                                <tr>
                                    <td>합</td>
                                    <td>[[${totalData.서울}]]</td>
                                    <td>[[${totalData.부산}]]</td>
                                    <td>[[${totalData.대구}]]</td>
                                    <td>[[${totalData.인천}]]</td>
                                    <td>[[${totalData.광주}]]</td>
                                    <td>[[${totalData.대전}]]</td>
                                    <td>[[${totalData.세종}]]</td>
                                    <td>[[${totalData.울산}]]</td>
                                    <td>[[${totalData.경기도}]]</td>
                                    <td>[[${totalData.강원도}]]</td>
                                    <td>[[${totalData.충북}]]</td>
                                    <td>[[${totalData.충남}]]</td>
                                    <td>[[${totalData.전북}]]</td>
                                    <td>[[${totalData.전남}]]</td>
                                    <td>[[${totalData.경북}]]</td>
                                    <td>[[${totalData.경남}]]</td>
                                    <td>[[${totalData.제주}]]</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div>
                        <!-- 총 화재 건수 -->
                        <div class="row">
                            <div class="col-5">
                                <div class="fs-4">
                                    <span style="color: red;">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64"
                                            fill="currentColor" class="bi bi-fire" viewBox="0 0 16 16">
                                            <path
                                                d="M8 16c3.314 0 6-2 6-5.5 0-1.5-.5-4-2.5-6 .25 1.5-1.25 2-1.25 2C11 4 9 .5 6 0c.357 2 .5 4-2 6-1.25 1-2 2.729-2 4.5C2 14 4.686 16 8 16m0-1c-1.657 0-3-1-3-2.75 0-.75.25-2 1.25-3C6.125 10 7 10.5 7 10.5c-.375-1.25.5-3.25 2-3.5-.179 1-.25 2 1 3 .625.5 1 1.364 1 2.25C11 14 9.657 15 8 15" />
                                        </svg>
                                    </span>
                                    <span class="text-white burn-count">
                                        총 화재 건수 : [[${max2}]]</span>
                                    </span>
                                </div>
                            </div>
                            <div class="col-7">
                                <div>
                                    <!-- 화재사고가 많이 난 지역 -->
                                    <span style="color: #EAF039;"><svg xmlns="http://www.w3.org/2000/svg" width="64"
                                            height="64" fill="currentColor" class="bi bi-emoji-dizzy"
                                            viewBox="0 0 16 16">
                                            <path
                                                d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16" />
                                            <path
                                                d="M9.146 5.146a.5.5 0 0 1 .708 0l.646.647.646-.647a.5.5 0 0 1 .708.708l-.647.646.647.646a.5.5 0 0 1-.708.708l-.646-.647-.646.647a.5.5 0 1 1-.708-.708l.647-.646-.647-.646a.5.5 0 0 1 0-.708m-5 0a.5.5 0 0 1 .708 0l.646.647.646-.647a.5.5 0 1 1 .708.708l-.647.646.647.646a.5.5 0 1 1-.708.708L5.5 7.207l-.646.647a.5.5 0 1 1-.708-.708l.647-.646-.647-.646a.5.5 0 0 1 0-.708M10 11a2 2 0 1 1-4 0 2 2 0 0 1 4 0" />
                                        </svg></span>
                                    <span class="fs-5 text-white accArea1">전기화재가 제일 많이 난 지역</span>
                                    <span class="fs-3 text-white accArea2">[[${maxArea}]] </span>

                                </div>
                            </div>
                            <div class="mt-1">
                                <canvas id="area-chart"
                                    style="width: 10vw; height: 11vh; background-color: white; border-radius: 5;"></canvas>
                            </div>
                        </div>



                        <!-- 22년 기준 화재 비율이 높아진 지역 -->
                        <!-- 22년 기준 화재 비율이 낮아진 지역 -->
                    </div>
                </div>
            </div>


        </div>
    </div>
    <!-- chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        // 라인차트
        let areaChart = new Chart(document.querySelector('#area-chart'), {
            type: 'line',
            data: {
                labels: ['서울', '부산', '대구', '인천', '광주', '대전', '세종', '울산', '경기', '강원', '충북', '충남', '전북', '전남', '경북', '경남', '제주'],
                datasets: [
                    {
                        data: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17],
                        label: "2016",
                        borderColor: "#c45850",
                        fill: false
                    },
                    {
                        data: [3, 5, 13, 14, 25, 36, 47, 58, 69, 110, 211, 312, 113, 114, 215, 316, 117],
                        label: "2017",
                        borderColor: "#3e95cd",
                        fill: false
                    },
                    {
                        data: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17],
                        label: "2018",
                        borderColor: "#E887D8",
                        fill: false
                    },
                    {
                        data: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17],
                        label: "2019",
                        borderColor: "#E7E85A",
                        fill: false
                    }
                    ,
                    {
                        data: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17],
                        label: "2020",
                        borderColor: "#37E828",
                        fill: false
                    }
                    ,
                    {
                        data: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17],
                        label: "2021",
                        borderColor: "#ABCBE8",
                        fill: false
                    }
                    ,
                    {
                        data: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17],
                        label: "2022",
                        borderColor: "#E8C7C8",
                        fill: false
                    }
                ]
            },
            options: {
                title: {
                    display: false,
                    text: 'World population per region (in millions)'
                },
                scales: {
                    y: {
                        min: 0,
                        max: 120
                    }
                }
            }
        });
        detailArea('all', 0);
        //메뉴바
        function detailArea(area, tag) {
            let areaMunuList = document.querySelectorAll(".area-menu");
            let areaNameList = document.querySelectorAll(".area-name-div");
            // 테이블
            let areaTable = document.querySelector(".area-table");
            // 화재 건수
            let burnCount = document.querySelector(".burn-count")
            // 사고가 많이난 지역 (전체, 수도권, 중부권, 남부권)
            let accArea1 = document.querySelector(".accArea1")
            // 사고가 많이난 지역 (지역명)
            let accArea2 = document.querySelector(".accArea2")


            //메뉴 부분
            if (tag != 0) {
                for (let areaMenu of areaMunuList) {
                    areaMenu.className = 'col-1 text-center text-white fs-3 area-menu'
                }
                tag.className = 'col-1 text-center text-white fs-3 area-menu bg-danger'
            } else {
                areaMunuList[0].className = 'col-1 text-center text-white fs-3 area-menu bg-danger'
            }
            //지역 이름
            if (area == 'all') {
                for (let areaName of areaNameList) {
                    areaName.className = 'mt-3 border border-danger border-5 area-name-div';
                }
            } else if (area == 'capital') {
                //수도권
                for (let areaName of areaNameList) {
                    areaName.className = 'mt-3 border border-5 area-name-div';
                }
                areaNameList[0].className = 'mt-3 border border-danger border-5 area-name-div'
            } else if (area == 'middle') {
                //중부권
                for (let areaName of areaNameList) {
                    areaName.className = 'mt-3 border  border-5 area-name-div';
                }
                areaNameList[1].className = 'mt-3 border border-danger border-5 area-name-div'
            } else if (area = 'south') {
                //남부권
                for (let areaName of areaNameList) {
                    areaName.className = 'mt-3 border  border-5 area-name-div';
                }
                areaNameList[2].className = 'mt-3 border border-danger border-5 area-name-div'
            }
            // ------------------- 첫번째 방식 ---------------//
            if (area == 'all') {
                // 전체를 선택한 경우
                fetch(`/geo/detail/${area}`)
                    .then((response) => {
                        if (!response.ok) {
                            alert('fetch error!\n컨트롤러로 통신중에 오류가 발생했습니다.');
                            return;
                        }
                        return response.json();
                    })
                    .then((data) => {
                        //정보 바꿔주기
                        burnCount.innerHTML = ''
                        let burnCountStr = `전체 총 화재 건수 ${data.max2}`
                        burnCount.insertAdjacentHTML("afterbegin", burnCountStr);
                        accArea1.innerHTML = ''
                        accArea2.innerHTML = ''
                        let accAreaStr1 = `전체지역에서 전기화재가 많이난 지역 `
                        let accAreaStr2 = `${data.maxArea}`
                        accArea1.insertAdjacentHTML("afterbegin", accAreaStr1);
                        accArea2.insertAdjacentHTML("afterbegin", accAreaStr2);

                        // 테이블 정보 바꿔주기
                        areaTable.innerHTML = ''
                        let tableStr = ``;
                        tableStr += `
                        <thead>
                                <tr>
                                    <td style="background-color: #1C212F; color: aliceblue;">연도</td>
                        `
                                    for(let kor of data.korList){
                                        tableStr += `
                                        <td style="background-color: #1C212F; color: aliceblue;">${kor}</td>
                                        `
                                    }
                        tableStr += `
                                </tr>
                            </thead>
                            <tbody>
                                `
                                for(let year of data.yearList){
                                    tableStr += `
                                    <tr>
                                        <td>${year}</td>
                                        `
                                        for(let info of data[year]){
                                            tableStr +=`
                                                <td>${info}</td>
                                            `
                                        }
                                    tableStr +=`
                                    </tr>
                                `
                                }
                                tableStr += `
                                <tr>
                                    <td>합</td>
                                    <td>${data.totalData['울산']}</td>
                                    <td>${data.totalData['충북']}</td>
                                    <td>${data.totalData['서울']}</td>
                                    <td>${data.totalData['전북']}</td>
                                    <td>${data.totalData['충남']}</td>
                                    <td>${data.totalData['부산']}</td>
                                    <td>${data.totalData['경기도']}</td>
                                    <td>${data.totalData['경북']}</td>
                                    <td>${data.totalData['대전']}</td>
                                    <td>${data.totalData['세종']}</td>
                                    <td>${data.totalData['강원도']}</td>
                                    <td>${data.totalData['제주']}</td>
                                    <td>${data.totalData['대구']}</td>
                                    <td>${data.totalData['인천']}</td>
                                    <td>${data.totalData['전남']}</td>
                                    <td>${data.totalData['광주']}</td>
                                    <td>${data.totalData['경남']}</td>
                                </tr>
                            </tbody>
                        `
                        areaTable.insertAdjacentHTML("afterbegin", tableStr)

                        console.log(data)
                        areaChart.destroy();
                        areaChart = new Chart(document.querySelector('#area-chart'), {
                            type: 'line',
                            data: {
                                labels: data.korList,
                                datasets: [
                                    {
                                        data: data['2016'],
                                        label: "2016",
                                        borderColor: "#c45850",
                                        fill: false
                                    },
                                    {
                                        data: data['2017'],
                                        label: "2017",
                                        borderColor: "#3e95cd",
                                        fill: false
                                    },
                                    {
                                        data: data['2018'],
                                        label: "2018",
                                        borderColor: "#E887D8",
                                        fill: false
                                    },
                                    {
                                        data: data['2019'],
                                        label: "2019",
                                        borderColor: "#E7E85A",
                                        fill: false
                                    }
                                    ,
                                    {
                                        data: data['2020'],
                                        label: "2020",
                                        borderColor: "#37E828",
                                        fill: false
                                    }
                                    ,
                                    {
                                        data: data['2021'],
                                        label: "2021",
                                        borderColor: "#ABCBE8",
                                        fill: false
                                    }
                                    ,
                                    {
                                        data: data['2022'],
                                        label: "2022",
                                        borderColor: "#E8C7C8",
                                        fill: false
                                    }
                                ]
                            },
                            options: {
                                title: {
                                    display: false,
                                    text: 'World population per region (in millions)'
                                },
                                scales: {
                                    y: {
                                        min: 0,
                                        max: 2500
                                    }
                                }
                            }
                        });
                    })
                    //fetch 통신 실패 시 실행 영역
                    .catch(err => {
                        alert('fetch error!\nthen 구문에서 오류가 발생했습니다.\n콘솔창을 확인하세요!');
                        console.log(err);
                    });
            } else if (area == 'capital') {
                // 수도권을 선택한 경우(서울, 인천광역시, 경기도)
                fetch(`/geo/detail/${area}`)
                    .then((response) => {
                        if (!response.ok) {
                            alert('fetch error!\n컨트롤러로 통신중에 오류가 발생했습니다.');
                            return;
                        }
                        return response.json(); //나머지 경우에 사용
                    })
                    .then((data) => {
                        //정보 바꿔주기
                        burnCount.innerHTML = ''
                        let burnCountStr = `수도권 총 화재 건수 ${data.max2}`
                        burnCount.insertAdjacentHTML("afterbegin", burnCountStr);
                        accArea1.innerHTML = ''
                        accArea2.innerHTML = ''
                        let accAreaStr1 = `수도권에서 전기화재가 많이난 지역 `
                        let accAreaStr2 = `${data.maxArea}`
                        accArea1.insertAdjacentHTML("afterbegin", accAreaStr1);
                        accArea2.insertAdjacentHTML("afterbegin", accAreaStr2);
                        console.log(data)

                        // 테이블 정보 바꿔주기
                        areaTable.innerHTML = ''
                        let tableStr = ``;
                        tableStr += `
                        <thead>
                                <tr>
                                    <td style="background-color: #1C212F; color: aliceblue;">연도</td>
                        `
                                    for(let kor of data.korList){
                                        tableStr += `
                                        <td style="background-color: #1C212F; color: aliceblue;">${kor}</td>
                                        `
                                    }

                        tableStr += `
                                </tr>
                            </thead>
                            <tbody>
                                `
                                for(let year of data.yearList){
                                    tableStr += `
                                    <tr>
                                        <td>${year}</td>
                                        `
                                        for(let info of data[year]){
                                            tableStr +=`
                                                <td>${info}</td>
                                            `
                                        }
                                    tableStr +=`
                                    </tr>
                                `
                                }
                                // 수도권을 선택한 경우(서울, 인천광역시, 경기도)
                                tableStr += `
                                <tr>
                                    <td>합</td>
                                    <td>${data.totalData['서울']}</td>
                                    <td>${data.totalData['인천']}</td>
                                    <td>${data.totalData['경기도']}</td>
                                </tr>
                            </tbody>
                        `
                        areaTable.insertAdjacentHTML("afterbegin", tableStr)

                        areaChart.destroy();
                        areaChart = new Chart(document.querySelector('#area-chart'), {
                            type: 'line',
                            data: {
                                labels: data.korList,
                                datasets: [
                                    {
                                        data: data['2016'],
                                        label: "2016",
                                        borderColor: "#c45850",
                                        fill: false
                                    },
                                    {
                                        data: data['2017'],
                                        label: "2017",
                                        borderColor: "#3e95cd",
                                        fill: false
                                    },
                                    {
                                        data: data['2018'],
                                        label: "2018",
                                        borderColor: "#E887D8",
                                        fill: false
                                    },
                                    {
                                        data: data['2019'],
                                        label: "2019",
                                        borderColor: "#E7E85A",
                                        fill: false
                                    }
                                    ,
                                    {
                                        data: data['2020'],
                                        label: "2020",
                                        borderColor: "#37E828",
                                        fill: false
                                    }
                                    ,
                                    {
                                        data: data['2021'],
                                        label: "2021",
                                        borderColor: "#ABCBE8",
                                        fill: false
                                    }
                                    ,
                                    {
                                        data: data['2022'],
                                        label: "2022",
                                        borderColor: "#E8C7C8",
                                        fill: false
                                    }
                                ]
                            },
                            options: {
                                title: {
                                    display: false,
                                    text: 'World population per region (in millions)'
                                },
                                scales: {
                                    y: {
                                        min: 0,
                                        max: 2500
                                    }
                                }
                            }
                        });
                    })
                    //fetch 통신 실패 시 실행 영역
                    .catch(err => {
                        alert('fetch error!\nthen 구문에서 오류가 발생했습니다.\n콘솔창을 확인하세요!');
                        console.log(err);
                    });

            } else if (area == 'middle') {
                // 중부권을 선택한 경우 (강원도, 충북, 충남, 세종, 대전)
                fetch(`/geo/detail/${area}`)
                    .then((response) => {
                        if (!response.ok) {
                            alert('fetch error!\n컨트롤러로 통신중에 오류가 발생했습니다.');
                            return;
                        }
                        return response.json(); //나머지 경우에 사용
                    })
                    .then((data) => {
                        //정보 바꿔주기
                        burnCount.innerHTML = ''
                        let burnCountStr = `중부권 총 화재 건수 ${data.max2}`
                        burnCount.insertAdjacentHTML("afterbegin", burnCountStr);
                        accArea1.innerHTML = ''
                        accArea2.innerHTML = ''
                        let accAreaStr1 = `중부권에서 전기화재가 많이난 지역 `
                        let accAreaStr2 = `${data.maxArea}`
                        accArea1.insertAdjacentHTML("afterbegin", accAreaStr1);
                        accArea2.insertAdjacentHTML("afterbegin", accAreaStr2);
                    
                        // 테이블 정보 바꿔주기
                        areaTable.innerHTML = ''
                        let tableStr = ``;
                        tableStr += `
                        <thead>
                                <tr>
                                    <td style="background-color: #1C212F; color: aliceblue;">연도</td>
                        `
                                    for(let kor of data.korList){
                                        tableStr += `
                                        <td style="background-color: #1C212F; color: aliceblue;">${kor}</td>
                                        `
                                    }
                        tableStr += `
                                </tr>
                            </thead>
                            <tbody>
                                `
                                for(let year of data.yearList){
                                    tableStr += `
                                    <tr>
                                        <td>${year}</td>
                                        `
                                        for(let info of data[year]){
                                            tableStr +=`
                                                <td>${info}</td>
                                            `
                                        }
                                    tableStr +=`
                                    </tr>
                                `
                                }
                                //충북 , 대전, 세종 , 충남, 강원도 순
                                tableStr += `
                                <tr>
                                    <td>합</td>
                                    <td>${data.totalData['충북']}</td>
                                    <td>${data.totalData['대전']}</td>
                                    <td>${data.totalData['세종']}</td>
                                    <td>${data.totalData['충남']}</td>
                                    <td>${data.totalData['강원도']}</td>
                                </tr>
                            </tbody>
                        `
                        areaTable.insertAdjacentHTML("afterbegin", tableStr)

                        console.log(data)
                        areaChart.destroy();
                        areaChart = new Chart(document.querySelector('#area-chart'), {
                            type: 'line',
                            data: {
                                labels: data.korList,
                                datasets: [
                                    {
                                        data: data['2016'],
                                        label: "2016",
                                        borderColor: "#c45850",
                                        fill: false
                                    },
                                    {
                                        data: data['2017'],
                                        label: "2017",
                                        borderColor: "#3e95cd",
                                        fill: false
                                    },
                                    {
                                        data: data['2018'],
                                        label: "2018",
                                        borderColor: "#E887D8",
                                        fill: false
                                    },
                                    {
                                        data: data['2019'],
                                        label: "2019",
                                        borderColor: "#E7E85A",
                                        fill: false
                                    }
                                    ,
                                    {
                                        data: data['2020'],
                                        label: "2020",
                                        borderColor: "#37E828",
                                        fill: false
                                    }
                                    ,
                                    {
                                        data: data['2021'],
                                        label: "2021",
                                        borderColor: "#ABCBE8",
                                        fill: false
                                    }
                                    ,
                                    {
                                        data: data['2022'],
                                        label: "2022",
                                        borderColor: "#E8C7C8",
                                        fill: false
                                    }
                                ]
                            },
                            options: {
                                title: {
                                    display: false,
                                    text: 'World population per region (in millions)'
                                },
                                scales: {
                                    y: {
                                        min: 0,
                                        max: 550
                                    }
                                }
                            }
                        });
                    })
                    //fetch 통신 실패 시 실행 영역
                    .catch(err => {
                        alert('fetch error!\nthen 구문에서 오류가 발생했습니다.\n콘솔창을 확인하세요!');
                        console.log(err);
                    });

            } else if (area = 'south') {
                // 남부권을 선택한 경우 
                // 울산 , 경북 , 전북, 부산, 제주 , 대구, 전남, 광주, 경남
                fetch(`/geo/detail/${area}`)
                    .then((response) => {
                        if (!response.ok) {
                            alert('fetch error!\n컨트롤러로 통신중에 오류가 발생했습니다.');
                            return;
                        }
                        return response.json();
                    })
                    .then((data) => {
                        //정보 바꿔주기
                        burnCount.innerHTML = ''
                        let burnCountStr = `남부권 총 화재 건수 ${data.max2}`
                        burnCount.insertAdjacentHTML("afterbegin", burnCountStr);
                        accArea1.innerHTML = ''
                        accArea2.innerHTML = ''
                        let accAreaStr1 = `남부권에서 전기화재가 많이난 지역 `
                        let accAreaStr2 = `${data.maxArea}`
                        accArea1.insertAdjacentHTML("afterbegin", accAreaStr1);
                        accArea2.insertAdjacentHTML("afterbegin", accAreaStr2);
                        // 울산 , 경북 , 전북, 부산, 제주 , 대구, 전남, 광주, 경남

                                                // 테이블 정보 바꿔주기
                                                areaTable.innerHTML = ''
                        let tableStr = ``;
                        tableStr += `
                        <thead>
                                <tr>
                                    <td style="background-color: #1C212F; color: aliceblue;">연도</td>
                        `
                                    for(let kor of data.korList){
                                        tableStr += `
                                        <td style="background-color: #1C212F; color: aliceblue;">${kor}</td>
                                        `
                                    }
                        tableStr += `
                                </tr>
                            </thead>
                            <tbody>
                                `
                                for(let year of data.yearList){
                                    tableStr += `
                                    <tr>
                                        <td>${year}</td>
                                        `
                                        for(let info of data[year]){
                                            tableStr +=`
                                                <td>${info}</td>
                                            `
                                        }
                                    tableStr +=`
                                    </tr>
                                `
                                }
                                tableStr += `
                                <tr>
                                    <td>합</td>
                                    <td>${data.totalData['울산']}</td>
                                    <td>${data.totalData['경북']}</td>
                                    <td>${data.totalData['전북']}</td>
                                    <td>${data.totalData['부산']}</td>
                                    <td>${data.totalData['제주']}</td>
                                    <td>${data.totalData['대구']}</td>
                                    <td>${data.totalData['전남']}</td>
                                    <td>${data.totalData['광주']}</td>
                                    <td>${data.totalData['경남']}</td>
                                </tr>
                            </tbody>
                        `
                        areaTable.insertAdjacentHTML("afterbegin", tableStr)

                        console.log(data)
                        areaChart.destroy();
                        areaChart = new Chart(document.querySelector('#area-chart'), {
                            type: 'line',
                            data: {
                                labels: data.korList,
                                datasets: [
                                    {
                                        data: data['2016'],
                                        label: "2016",
                                        borderColor: "#c45850",
                                        fill: false
                                    },
                                    {
                                        data: data['2017'],
                                        label: "2017",
                                        borderColor: "#3e95cd",
                                        fill: false
                                    },
                                    {
                                        data: data['2018'],
                                        label: "2018",
                                        borderColor: "#E887D8",
                                        fill: false
                                    },
                                    {
                                        data: data['2019'],
                                        label: "2019",
                                        borderColor: "#E7E85A",
                                        fill: false
                                    }
                                    ,
                                    {
                                        data: data['2020'],
                                        label: "2020",
                                        borderColor: "#37E828",
                                        fill: false
                                    }
                                    ,
                                    {
                                        data: data['2021'],
                                        label: "2021",
                                        borderColor: "#ABCBE8",
                                        fill: false
                                    }
                                    ,
                                    {
                                        data: data['2022'],
                                        label: "2022",
                                        borderColor: "#E8C7C8",
                                        fill: false
                                    }
                                ]
                            },
                            options: {
                                title: {
                                    display: false,
                                    text: 'World population per region (in millions)'
                                },
                                scales: {
                                    y: {
                                        min: 0,
                                        max: 700
                                    }
                                }
                            }
                        });
                    })
                    .catch(err => {
                        alert('fetch error!\nthen 구문에서 오류가 발생했습니다.\n콘솔창을 확인하세요!');
                        console.log(err);
                    });
            }
        }
    </script>
</th:block>

<th:block layout:fragment="content_js">
    <!-- html 파일이 열릴때 같이 실행되는 js -->
    <script src="/"></script>
</th:block>

</html>